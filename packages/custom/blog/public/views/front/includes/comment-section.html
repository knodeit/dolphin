<div class="comment-section-container">
    <div class="existing-comments">
        <h2>COMMENTS</h2>
        <br>
        <div class="comment-container" ng-repeat="comment in comments">
            <div class="single-comment" ng-style="{'margin-left': ''+ (20*comment.depth) + 'px'}">
                <ng-switch on="isAdmin">

                    <div ng-switch-when="true">

                        <div class="pull-right">
                            <button ajax-button-disable type="submit" ng-click="delete(comment)"class="delete-button pull-right">Delete</button><br>
                        </div>
                    </div>
                </ng-switch>
                <div class="comment-heading"><span ng-if="comment.content.user" class="comment-author">{{comment.content.user.username}}</span><span ng-if="!comment.content.user" class="comment-author">{{comment.content.name}}</span><div class="comment-date-submitted">{{comment.content.created | date:"mediumDate" }}</div></div>
                <div class="comment-content">{{comment.content.content}}</div>

                <button ajax-button-disable type="submit" ng-click="replyTo(comment)"class="reply-to-comment-button">Reply</button>
                <br>

                    <ng-switch on="comment===commentToReply">

                        <div ng-switch-when="true">

                            <div class="new-comment-submitter">
                                <button ajax-button-disable type="submit" ng-click="replyTo(undefined)"class="cancel-reply-button pull-right">X</button>
                                <h3 class="label-of-new-comment">REPLY</h3>
                                <div class="fbloginOption" ng-hide="loginStatus === 'connected' || loggedIn">
                                    <div id="status1" ng-bind="status"></div>
                                    <button class="post-comment-button" ng-hide="loginStatus === 'connected' || loggedIn" type="button" ng-click="login()">Facebook Login</button>
                                    <div style="font-weight: bolder; margin-top:10px">OR</div>
                                </div>

                                <form class="form-horizontal" role="form" data-ng-submit="submit(commentToReply)">
                                    <div ng-hide="loggedIn || loginStatus === 'connected'">
                                        <label ng-if="!loggedIn && loginStatus !== 'connected'">email:&nbsp;<input ng-model="form.comentEmail" type="email"></label>
                                        <label ng-if="!loggedIn && loginStatus !== 'connected'">name:&nbsp;<input ng-model="form.commentName" type="text"></label>
                                    </div>
                                    <div ng-show="!loggedIn && loginStatus === 'connected'">
                                        <div><label ng-if="!loggedIn">email:&nbsp;{{FBinfo.email}}</label></div>
                                        <div><label ng-if="!loggedIn">name:&nbsp;{{FBinfo.first_name}}</label></div>
                                    </div>
                                    <br>
                                    <textarea class="input-for-comments" rows="4" cols="40"  ng-required="form.commentcontent > 0" ng-model="form.commentcontent"></textarea>
                                    <br>
                                    <br>
                                    <button ajax-button-disable class="post-comment-button" type="submit" id="submitButton2">POST</button>
                                </form>
                                <br>
                        </div>
                        </div>
                    </ng-switch>



            </div>
        </div>

    </div>
    <br>
    <div ng-hide="commentToReply" class="new-comment-submitter">
        <h3>NEW COMMENT</h3>
        <div class="fbloginOption" ng-hide="loginStatus === 'connected' || loggedIn">
            <div id="status" ng-bind="status"></div>
            <button class="post-comment-button" ng-hide="loginStatus === 'connected' || loggedIn" type="button" ng-click="login()">Facebook Login</button>
            <div style="font-weight: bolder; margin-top:10px">OR</div>
        </div>

        <form class="form-horizontal" role="form" data-ng-submit="submit(commentToReply)">
            <div ng-hide="loggedIn || loginStatus === 'connected'">
                <label ng-if="!loggedIn && loginStatus !== 'connected'">email:&nbsp;<input ng-model="form.comentEmail" type="email"></label>
                <label ng-if="!loggedIn && loginStatus !== 'connected'">name:&nbsp;<input ng-model="form.commentName" type="text"></label>
            </div>
            <div ng-show="!loggedIn && loginStatus === 'connected'">
                <div><label ng-if="!loggedIn">email:&nbsp;{{FBinfo.email}}</label></div>
                <div><label ng-if="!loggedIn">name:&nbsp;{{FBinfo.first_name}}</label></div>
            </div>
            <br>
            <textarea class="input-for-comments" rows="4" cols="40"  ng-required="form.commentcontent > 0" ng-model="form.commentcontent"></textarea>
            <br>
            <br>
            <button ajax-button-disable class="post-comment-button" type="submit" id="submitButton">POST</button>
        </form>
        <br>
    </div>
</div>
